# 电商数据管理系统 - 架构说明文档

## 1. 系统架构图

```
                                    ┌─────────────────────────────────────────────────────────┐
                                    │                    Docker Host                          │
                                    │                                                         │
    ┌──────────┐                    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
    │  用户    │───HTTP:80──────────┼─▶│  Frontend   │───▶│   Backend   │───▶│   MySQL     │ │
    │ Browser  │                    │  │   (Nginx)   │    │(Spring Boot)│    │  Database   │ │
    └──────────┘                    │  │   :80       │    │   :8080     │    │   :3306     │ │
                                    │  └─────────────┘    └─────────────┘    └─────────────┘ │
                                    │         │                 │                   │        │
                                    │         └─────────────────┴───────────────────┘        │
                                    │                           │                            │
                                    │                  ┌────────┴────────┐                   │
                                    │                  │  Docker Network │                   │
                                    │                  │   (ecommerce)   │                   │
                                    │                  └─────────────────┘                   │
                                    │                                                         │
                                    └─────────────────────────────────────────────────────────┘
```

## 2. 服务组件说明

### 2.1 前端服务 (Frontend)
- **基础镜像**: nginx:alpine
- **端口**: 80
- **功能**: 
  - 提供静态页面服务
  - 反向代理API请求到后端
  - 静态资源缓存和压缩

### 2.2 后端服务 (Backend)
- **基础镜像**: eclipse-temurin:21-jre-alpine
- **端口**: 8080
- **功能**:
  - RESTful API服务
  - 商品CRUD操作
  - 数据验证和业务逻辑

### 2.3 数据库服务 (MySQL)
- **基础镜像**: mysql:8.0
- **端口**: 3306
- **功能**:
  - 数据持久化存储
  - 事务支持
  - 数据备份

## 3. 网络架构

```
┌─────────────────────────────────────────────────────────────┐
│                    ecommerce-network                        │
│                    (172.20.0.0/16)                          │
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │  frontend   │    │   backend   │    │    mysql    │     │
│  │ 172.20.0.x  │───▶│ 172.20.0.x  │───▶│ 172.20.0.x  │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 4. 数据流

1. **用户请求流程**:
   - 用户访问 http://localhost:80
   - Nginx 返回静态页面
   - 前端 JavaScript 发起 API 请求
   - Nginx 代理请求到后端 /api/*
   - 后端处理请求，查询/更新数据库
   - 返回 JSON 响应

2. **数据持久化**:
   - MySQL 数据存储在 Docker Volume
   - 容器重启数据不丢失

## 5. 技术选型理由

| 组件 | 选型 | 理由 |
|------|------|------|
| 前端容器 | nginx:alpine | 轻量级，性能好，约50MB |
| 后端框架 | Spring Boot 3.x | 成熟稳定，生态丰富 |
| 运行时 | Java 21 | LTS版本，性能优化 |
| 数据库 | MySQL 8.0 | 广泛使用，功能完善 |
| 容器编排 | Docker Compose | 简单易用，适合单机部署 |

## 6. 扩展性设计

- 后端服务可水平扩展（无状态设计）
- 数据库可配置主从复制
- 支持 Kubernetes 部署
- 支持蓝绿部署和金丝雀发布
